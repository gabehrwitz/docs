---
title: "Webhooks"
description: "Get notified when data changes in Rowbase"
---

## Overview

Webhooks allow you to receive real-time notifications when events occur in Rowbase. Instead of polling the API, Rowbase pushes updates to your endpoint.

## Setting Up Webhooks

### Create a Webhook

1. Go to **Settings → Webhooks**
2. Click **Create Webhook**
3. Enter your endpoint URL
4. Select which events to subscribe to
5. Click **Create**

### Webhook URL Requirements

Your endpoint must:
- Use HTTPS (HTTP not allowed for security)
- Respond with 2xx status within 30 seconds
- Accept POST requests with JSON body

## Events

### Available Events

| Event | Description |
|-------|-------------|
| `dataset.created` | A new dataset was created |
| `dataset.updated` | Dataset metadata was updated |
| `dataset.deleted` | A dataset was deleted |
| `dataset.data.added` | Rows were added to a dataset |
| `dataset.data.updated` | Rows were modified |
| `dataset.data.deleted` | Rows were deleted |
| `operation.created` | An operation was added |
| `operation.updated` | An operation was modified |
| `operation.deleted` | An operation was removed |
| `project.created` | A new project was created |
| `project.updated` | Project settings were changed |
| `project.deleted` | A project was deleted |

### Event Payload

All webhook events follow this structure:

```json
{
  "id": "evt_xxx",
  "type": "dataset.data.added",
  "created_at": "2024-01-15T10:30:00Z",
  "data": {
    "dataset_id": "ds_xxx",
    "dataset_name": "Customers",
    "project_id": "proj_xxx",
    "rows_affected": 5,
    "triggered_by": {
      "type": "user",
      "id": "user_xxx",
      "email": "alice@example.com"
    }
  }
}
```

## Verifying Webhooks

### Signature Verification

Each webhook request includes a signature header for verification:

```
X-Rowbase-Signature: sha256=abc123...
```

Verify the signature to ensure the request came from Rowbase:

<Tabs>
  <Tab title="Node.js">
    ```javascript
    const crypto = require('crypto');

    function verifyWebhook(payload, signature, secret) {
      const expected = crypto
        .createHmac('sha256', secret)
        .update(payload)
        .digest('hex');

      return crypto.timingSafeEqual(
        Buffer.from(signature),
        Buffer.from(`sha256=${expected}`)
      );
    }

    // In your webhook handler
    app.post('/webhooks/rowbase', (req, res) => {
      const signature = req.headers['x-rowbase-signature'];
      const isValid = verifyWebhook(
        JSON.stringify(req.body),
        signature,
        process.env.ROWBASE_WEBHOOK_SECRET
      );

      if (!isValid) {
        return res.status(401).send('Invalid signature');
      }

      // Process the webhook
      console.log('Event:', req.body.type);
      res.status(200).send('OK');
    });
    ```
  </Tab>
  <Tab title="Python">
    ```python
    import hmac
    import hashlib

    def verify_webhook(payload: str, signature: str, secret: str) -> bool:
        expected = hmac.new(
            secret.encode(),
            payload.encode(),
            hashlib.sha256
        ).hexdigest()
        return hmac.compare_digest(signature, f"sha256={expected}")

    # In your webhook handler (Flask example)
    @app.route('/webhooks/rowbase', methods=['POST'])
    def handle_webhook():
        signature = request.headers.get('X-Rowbase-Signature')
        payload = request.get_data(as_text=True)

        if not verify_webhook(payload, signature, WEBHOOK_SECRET):
            return 'Invalid signature', 401

        event = request.json
        print(f"Event: {event['type']}")
        return 'OK', 200
    ```
  </Tab>
</Tabs>

## Retry Policy

If your endpoint doesn't respond with a 2xx status, Rowbase retries with exponential backoff:

| Attempt | Delay |
|---------|-------|
| 1 | Immediate |
| 2 | 1 minute |
| 3 | 5 minutes |
| 4 | 30 minutes |
| 5 | 2 hours |
| 6 | 8 hours |

After 6 failed attempts, the webhook is marked as failing. You'll receive an email notification.

## Testing Webhooks

### Test Events

Send test events from the webhook settings page:

1. Go to **Settings → Webhooks**
2. Click on your webhook
3. Click **Send Test Event**
4. Choose an event type
5. View the response

### Local Development

Use a tunnel service to test webhooks locally:

```bash
# Using ngrok
ngrok http 3000

# Your webhook URL becomes:
# https://abc123.ngrok.io/webhooks/rowbase
```

## Webhook Logs

View recent webhook deliveries:

1. Go to **Settings → Webhooks**
2. Click on a webhook
3. View the **Delivery Log**

Each log entry shows:
- Event type and timestamp
- Request payload
- Response status and body
- Delivery attempts and timing

## Best Practices

<AccordionGroup>
  <Accordion title="Respond quickly" icon="bolt">
    Return a 200 response immediately, then process the event asynchronously. This prevents timeouts.
  </Accordion>
  <Accordion title="Handle duplicates" icon="clone">
    Webhooks may be delivered more than once. Use the event `id` to deduplicate.
  </Accordion>
  <Accordion title="Verify signatures" icon="shield">
    Always verify the webhook signature to ensure requests are authentic.
  </Accordion>
  <Accordion title="Use a queue" icon="list">
    For high-volume webhooks, push events to a message queue for reliable processing.
  </Accordion>
</AccordionGroup>

## Example: Sync to Database

```javascript
app.post('/webhooks/rowbase', async (req, res) => {
  // Verify signature (see above)

  const event = req.body;

  switch (event.type) {
    case 'dataset.data.added':
      // Fetch the new data
      const data = await rowbase.datasets.getData(
        event.data.dataset_id,
        { limit: event.data.rows_affected }
      );

      // Insert into your database
      await db.insert('synced_data', data.rows);
      break;

    case 'dataset.data.deleted':
      // Remove from your database
      await db.delete('synced_data', {
        rowbase_ids: event.data.row_ids
      });
      break;
  }

  res.status(200).send('OK');
});
```
